{"ast":null,"code":"var _jsxFileName = \"/home/mayuri/Desktop/vaidya/vaidyamanager/frontend/src/screens/NewPassword.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from \"react-router-dom\";\n// Bootstrap Components\nimport { Form, Button, Component } from 'react-bootstrap';\nimport '../bootstrap.min.css';\nimport Toast from 'react-bootstrap/Toast';\nimport M from 'materialize-css';\n// Redux\nimport { useDispatch, useSelector } from 'react-redux';\n// UI Components\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\n\n//css\nimport \"../login.css\";\nconst NewPassword = _ref => {\n  let {\n    location,\n    history\n  } = _ref;\n  // State to hold email and password\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [position, setPosition] = useState('top-center');\n  const [message, setMessage] = useState(null);\n  const dispatch = useDispatch();\n  const {\n    token\n  } = useParams();\n  // console.log(token)\n  // Get user login info from Redux state\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    loading,\n    error,\n    userInfo\n  } = userLogin;\n  const redirect = location.search ? location.search.split('=')[1] : '/';\n  useEffect(() => {\n    // If there is user info then redirect\n    if (userInfo) {\n      history.push(redirect);\n    }\n  }, [history, userInfo, redirect]);\n  const PostData = e => {\n    e.preventDefault();\n    if (password !== confirmPassword) {\n      // setMessage('Passwords do not match')\n      alert(\"Password do no match\");\n    } else {\n      // Dispatch Register\n      fetch(\"http://localhost:5000/api/users/new-password\", {\n        method: \"post\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          password,\n          token\n        })\n      }).then(res => res.json()).then(data => {\n        console.log(data);\n        if (data.error) {\n          alert(\"Please Check your mail\");\n          M.toast({\n            html: data.error,\n            classes: \"#c62828 red darken-3\"\n          });\n        } else {\n          M.toast({\n            html: data.message,\n            classes: \"#43a047 green darken-1\"\n          });\n          history.push('/login');\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n  // Handler that logs in the user\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"vh-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container py-5 h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row d-flex align-items-center justify-content-center h-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 col-lg-7 col-xl-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"http://localhost:3000/images/undrawl.png\",\n    className: \"img-fluid\",\n    alt: \"Phone image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-7 col-lg-5 col-xl-5 offset-xl-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  }, error && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 39\n    }\n  }, error), loading && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(Form, {\n    onSubmit: PostData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-outline mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"form1Example13\",\n    className: \"form-control form-control-lg\",\n    controlId: \"password\",\n    placeholder: \"New Password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-outline mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    id: \"form1Example13\",\n    className: \"form-control form-control-lg\",\n    controlId: \"confirmPassword\",\n    placeholder: \"Confirm Password\",\n    value: confirmPassword,\n    onChange: e => setConfirmPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    className: \"btn btn-primary btn-lg btn-block\",\n    style: {\n      backgroundColor: \"#3b5998\"\n    }\n    //  onClick={()=>PostData()}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 33\n    }\n  }, \"Update Password\")))))));\n};\nexport default NewPassword;","map":{"version":3,"names":["React","useState","useEffect","useParams","Form","Button","Component","Toast","M","useDispatch","useSelector","Message","Loader","NewPassword","location","history","password","setPassword","confirmPassword","setConfirmPassword","position","setPosition","message","setMessage","dispatch","token","userLogin","state","loading","error","userInfo","redirect","search","split","push","PostData","e","preventDefault","alert","fetch","method","headers","body","JSON","stringify","then","res","json","data","console","log","toast","html","classes","catch","err","target","value","backgroundColor"],"sources":["/home/mayuri/Desktop/vaidya/vaidyamanager/frontend/src/screens/NewPassword.js"],"sourcesContent":["import React, { useState, useEffect} from 'react'\nimport { useParams } from \"react-router-dom\";\n// Bootstrap Components\nimport { Form, Button,Component } from 'react-bootstrap'\nimport '../bootstrap.min.css'\nimport Toast from 'react-bootstrap/Toast';\nimport M from 'materialize-css'\n// Redux\nimport { useDispatch, useSelector } from 'react-redux'\n// UI Components\nimport Message from '../components/Message'\nimport Loader from '../components/Loader'\n\n//css\nimport \"../login.css\"\n\nconst NewPassword = ({ location, history }) => {\n    // State to hold email and password\n    const [password, setPassword] = useState('')\n    const [confirmPassword, setConfirmPassword] = useState('')\n    const [position, setPosition] = useState('top-center');\n    const [message, setMessage] = useState(null)\n    const dispatch = useDispatch()\n    const {token} = useParams()\n    // console.log(token)\n    // Get user login info from Redux state\n    const userLogin = useSelector((state) => state.userLogin)\n    const { loading, error, userInfo } = userLogin\n\n    const redirect = location.search ? location.search.split('=')[1] : '/'\n\n    useEffect(() => {\n        // If there is user info then redirect\n        if (userInfo) {\n            history.push(redirect)\n        }\n    }, [history, userInfo, redirect])\n\n    const PostData = (e)=>{\n        e.preventDefault()\n        if (password !== confirmPassword) {\n        \n            // setMessage('Passwords do not match')\n            alert(\"Password do no match\")\n        }\n         else {\n            // Dispatch Register\n            fetch(\"http://localhost:5000/api/users/new-password\",{\n                method:\"post\",\n                headers:{\n                    \"Content-Type\":\"application/json\"\n                },\n                body:JSON.stringify({\n                    password,\n                    token\n                })\n            }).then(res=>res.json())\n            .then(data=>{\n                console.log(data)\n               if(data.error){\n                alert(\"Please Check your mail\")\n                  M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\n               }\n               else{\n                   M.toast({html:data.message,classes:\"#43a047 green darken-1\"})\n                   history.push('/login')\n               \n               }\n            }).catch(err=>{\n                console.log(err)\n            })\n        }\n       \n    }\n    // Handler that logs in the user\n    \n    return (\n        <div>\n            <section className=\"vh-100\">\n                <div className=\"container py-5 h-100\">\n                    <div className=\"row d-flex align-items-center justify-content-center h-100\">\n                        <div className=\"col-md-8 col-lg-7 col-xl-6\">\n                            <img src={\"http://localhost:3000/images/undrawl.png\"}\n                                className=\"img-fluid\" alt=\"Phone image\" />\n                        </div>\n                        <div className=\"col-md-7 col-lg-5 col-xl-5 offset-xl-1\">\n                            {error && <Message variant='danger'>{error}</Message>}\n                            {loading && <Loader />}\n                            <Form \n                            onSubmit={PostData}\n                            >\n                                <div className=\"form-outline mb-4\">\n                                    <input type=\"password\"\n                                        id=\"form1Example13\"\n                                        className=\"form-control form-control-lg\"\n                                        controlId='password'\n                                        placeholder='New Password'\n                                        value={password}\n                                        onChange={(e) => setPassword(e.target.value)} />\n                                </div>\n\n                                <div className=\"form-outline mb-4\">\n                                    <input type=\"password\"\n                                        id=\"form1Example13\"\n                                        className=\"form-control form-control-lg\"\n                                        controlId='confirmPassword'\n                                        placeholder='Confirm Password'\n                                        value={confirmPassword}\n                                        onChange={(e) => setConfirmPassword(e.target.value)} />\n                                </div>\n\n                                <Button type=\"submit\" className=\"btn btn-primary btn-lg btn-block\" style={{ backgroundColor: \"#3b5998\" }}\n                                //  onClick={()=>PostData()}\n                                 >\n                                    Update Password\n                                </Button>\n                            </Form>\n                        </div>\n                    </div>\n                </div>\n            </section>\n        </div>\n    )\n}\n\nexport default NewPassword\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}