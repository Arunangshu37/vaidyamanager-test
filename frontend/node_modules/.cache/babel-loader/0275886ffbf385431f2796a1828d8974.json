{"ast":null,"code":"var _jsxFileName = \"/home/mayuri/Desktop/vaidya/vaidyamanager/frontend/src/screens/Prescription.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { DataGrid, GridActionsCellItem } from '@mui/x-data-grid';\nimport { listDoctors } from '../actions/productActions';\nimport { listConsultants, updatePrescriptionData } from '../actions/consultationActions.js';\nimport { IconButton } from '@mui/material';\nimport Box from '@mui/material/Box';\nimport jsPDF from \"jspdf\";\nimport \"jspdf-autotable\";\nimport { format, setDayOfYear } from \"date-fns\";\nimport TextField from '@mui/material/TextField';\nimport TextareaAutosize from '@mui/material/TextareaAutosize';\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\nimport FormHelperText from '@mui/material/FormHelperText';\nimport Stack from '@mui/material/Stack';\nimport Button from '@mui/material/Button';\nimport DatePicker from \"react-datepicker\";\nimport Grid from \"@material-ui/core/Grid\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { useLocation } from 'react-router-dom';\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\nconst Prescription = _ref => {\n  let {\n    match,\n    history\n  } = _ref;\n  const prescriptionId = match.params.id;\n  // console.log(prescriptionId)\n  const dispatch = useDispatch();\n  const [actualname, setActualName] = useState('');\n  const [height, setHeight] = useState('');\n  const [weight, setWeight] = useState('');\n  const [appointmentRowData, setAppointmentRowData] = useState([]);\n  const [observation, setObservation] = useState('');\n  const [date, setDate] = useState(new Date());\n  const [isgenerated, setIsgenerated] = useState(false);\n  const [prescrptionfile, setPrescrptionfile] = useState('');\n  const [isApiCall, setIsApiCall] = useState(false);\n  // const [mailId, setMailId] = useState();\n  const location = useLocation();\n  // console.log(location.state)\n\n  const doctorList = useSelector(state => state.doctorList);\n  const {\n    loading,\n    error,\n    doctors\n  } = doctorList;\n  // console.log(\"Doctor List\", doctors);\n\n  const patientList = useSelector(state => state.consultationList);\n  // console.log(\"List is\", patientList)\n  const {\n    loadingConsultant,\n    errorConsultant,\n    consultants\n  } = patientList;\n  const appointmentDetails = consultants === null || consultants === void 0 ? void 0 : consultants.find(r => r._id === prescriptionId);\n  // if(appointmentDetails)\n  // console.log(\"appointmentDetails\", appointmentDetails)\n  const userLogin = useSelector(state => state.userLogin);\n  const {\n    userInfo\n  } = userLogin;\n  // console.log(\"user info\", userInfo);\n  const isAdmin = userInfo === null || userInfo === void 0 ? void 0 : userInfo.isAdmin;\n  const doctorInfo = doctors === null || doctors === void 0 ? void 0 : doctors.find(doctor => doctor.email_id == (userInfo === null || userInfo === void 0 ? void 0 : userInfo.email));\n  // console.log(\"Doctor Info\", doctorInfo)\n  //columns\n\n  const [sortModel, setSortModel] = useState([{\n    field: \"date\",\n    sort: \"desc\"\n  }]);\n  const patientHistory = [{\n    field: '_id',\n    headerName: 'ID',\n    width: 90,\n    hide: true\n  }, {\n    field: 'patientName',\n    headerName: 'Patient Name',\n    width: 190\n  }, {\n    field: 'date',\n    headerName: 'Appointment Date',\n    width: 190,\n    type: 'dateTime',\n    sortable: true,\n    valueGetter: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return value && new Date(value);\n    }\n  }, {\n    field: 'patientHeight',\n    headerName: 'Height',\n    width: 120\n  }, {\n    field: 'patientWeight',\n    headerName: 'Weight',\n    width: 140\n  }, {\n    field: 'Observation',\n    headerName: 'Observation',\n    width: 120\n  }, {\n    field: 'prescriptionSource',\n    headerName: 'Prescription',\n    width: 120,\n    renderCell: params => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-between align-items-center\",\n        style: {\n          cursor: 'pointer'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(IconButton, {\n        color: \"primary\",\n        size: \"large\"\n        // onClick={()=>window.open(`${params.row.prescriptionSource}`,'_blank')}\n        ,\n        onClick: () => pdf(params),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(FileDownloadIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 29\n        }\n      })));\n    }\n  }];\n  //Display the pdf function\n  const pdf = consultant => {\n    // console.log(\"first\", consultant.row.prescriptionSource)\n    var win = window.open();\n    win.document.write('<iframe src=\"' + consultant.row.prescriptionSource + '\" frameborder=\"0\" style=\"border:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;\" allowfullscreen></iframe>');\n  };\n  useEffect(() => {\n    // Dispatch the list doctors action and fill our state\n    dispatch(listDoctors());\n    dispatch(listConsultants());\n  }, [dispatch]);\n  useEffect(() => {\n    const data = (consultants === null || consultants === void 0 ? void 0 : consultants.length) > 0 && consultants[0] !== 'undefined' && (consultants === null || consultants === void 0 ? void 0 : consultants.filter(consultantInfo => (consultantInfo === null || consultantInfo === void 0 ? void 0 : consultantInfo.name) == (doctorInfo === null || doctorInfo === void 0 ? void 0 : doctorInfo.name)));\n    const uniqueData = (data === null || data === void 0 ? void 0 : data.length) > 0 && (data === null || data === void 0 ? void 0 : data.filter(e => e.patientEmail_address === appointmentDetails.patientEmail_address));\n    //    console.log(\"Data is\",uniqueData)\n    setAppointmentRowData(uniqueData);\n  }, [consultants, doctorInfo]);\n\n  //use state for dynamic input fields\n  const [inputFields, setInputFields] = useState([{\n    drug: '',\n    frequency: '',\n    duration: '',\n    instruction: ''\n  }]);\n  const handleFormChange = (index, event) => {\n    let data = [...inputFields];\n    data[index][event.target.name] = event.target.value;\n    setInputFields(data);\n  };\n  const addFields = () => {\n    let newfield = {\n      drug: '',\n      frequency: '',\n      duration: '',\n      instruction: ''\n    };\n    setInputFields([...inputFields, newfield]);\n  };\n  const removeFields = index => {\n    let data = [...inputFields];\n    data.splice(index, 1);\n    setInputFields(data);\n  };\n  //GeneratePDF Function\n\n  const [head] = React.useState([\"Drug\", \"Daily Dose\", \"Duration\", \"Instruction\"]);\n  const [body, setBody] = useState([]);\n  const generatePDF = () => {\n    let doc = new jsPDF(\"p\", \"pt\", \"a4\", true);\n    doc.setFont(\"Calibri\", \"bold\");\n    doc.setFontSize(12);\n    doc.setTextColor(14, 3, 64);\n\n    //   doc.text(\"Prescription\", 20, 140);\n    // doc.text(\"Octonyan loves jsPDF\", 25, 10);\n    // doc.text(\"This is centred text.\", 100, 20, null, null, \"center\");\n    doc.addImage(\"/images/mindvein.png\", \"PNG\", 40, 80, 150, 90);\n    doc.text(`Doctor's Name: ${appointmentDetails.name}`, 520, 135, null, null, \"right\");\n    doc.text(\"Address : Sector 8, Sheltor Complex, \\n\" + \"Near KGN Xpress Hotel, Kharghar,\\n\" + \"Navi Mumbai 410210, \\n\" + \"Maharashtra, India.\", 550, 147, null, null, \"right\");\n    doc.text(\"Phone No:(+91) 8567029029\", 550, 200, null, null, \"right\");\n    // doc.addImage(\"/images/mindvein.png\", \"PNG\", X-axis, Y-asis, width, height);\n    doc.line(20, 230, 550, 230);\n    doc.text(\"Prescription\", 20, 270);\n\n    //   doc.text(\"Table 2\", 20, 300);\n    //   doc.line(20, 302, 550, 302);\n\n    doc.autoTable({\n      margin: {\n        top: 250,\n        left: 20,\n        bottom: 30\n      },\n      head: [head],\n      body: body\n    });\n\n    // window.open(doc.output(\"bloburl\"), \"_blank\");\n    // const p = doc.output(\"bloburl\");\n    const p = doc.output(\"datauristring\");\n    setPrescrptionfile(p);\n    setIsApiCall(true);\n  };\n  const apiCall = () => {\n    const prescriptionData = {\n      patientName: actualname,\n      patientHeight: height,\n      patientWeight: weight,\n      Observation: observation,\n      name: appointmentDetails.name,\n      date: appointmentDetails.appointment_date,\n      prescriptionSource: prescrptionfile\n    };\n    // console.log(\"prescriptionId\", prescriptionId, prescriptionData)\n    dispatch(updatePrescriptionData(prescriptionId, prescriptionData));\n  };\n  useEffect(() => {\n    if (isApiCall) {\n      apiCall();\n    }\n  }, [isApiCall]);\n  const submit = async e => {\n    e.preventDefault();\n    const data = [];\n    inputFields.forEach((a, index) => {\n      data.push(Object.values(a));\n    });\n    setBody(data);\n    // console.log(inputFields)\n    setIsgenerated(true);\n\n    //api call\n  };\n\n  useEffect(() => {\n    if (isgenerated) {\n      generatePDF();\n      setIsgenerated(false);\n    }\n  }, [isgenerated]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginTop: \"6rem\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      height: 400,\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DataGrid, {\n    getRowId: r => r._id,\n    rows: appointmentRowData,\n    columns: patientHistory,\n    pageSize: 5,\n    rowsPerPageOptions: [5],\n    disableSelectionOnClick: true,\n    experimentalFeatures: {\n      newEditingApi: true\n    },\n    sortModel: sortModel,\n    onSortModelChange: model => setSortModel(model),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container mt-4 p-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 17\n    }\n  }, \"Patient Information\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    component: \"form\",\n    sx: {\n      '& > :not(style)': {\n        m: 1,\n        width: '23ch'\n      }\n    },\n    noValidate: true,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-basic\",\n    label: \"Patient Name\",\n    value: actualname\n    // onChange={(name) => setName()}\n    ,\n    onChange: e => setActualName(e.target.value),\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-basic\",\n    label: \"Patient Height\",\n    value: height\n    // onChange={(height) => setHeight(height)}\n    ,\n    onChange: e => setHeight(e.target.value),\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    id: \"outlined-basic\",\n    label: \"Patient Weight\",\n    value: weight\n    // onChange={(weight) => setWeight(weight)}\n    ,\n    onChange: e => setWeight(e.target.value),\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(DatePicker, {\n    selected: date,\n    onChange: e => setDate(e),\n    dateFormat: \"MMM d, yyyy hh:mm aa\",\n    placeholderText: \"Please Select Date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 17\n    }\n  }, \"Patient Observation\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    component: \"form\",\n    sx: {\n      '& > :not(style)': {\n        m: 1,\n        width: '23ch'\n      }\n    },\n    noValidate: true,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TextareaAutosize, {\n    \"aria-label\": \"minimum height\",\n    minRows: 3\n    // placeholder=\"Minimum 3 rows\"\n    ,\n    value: observation,\n    onChange: e => setObservation(e.target.value)\n    // onChange={(o) => setObservation(o)}\n    ,\n    style: {\n      width: '100ch'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 306,\n      columnNumber: 17\n    }\n  }, \"Prescriptions\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    component: \"form\",\n    sx: {\n      m: 1\n    },\n    noValidate: true,\n    autoComplete: \"off\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 21\n    }\n  }, inputFields.map((input, index) => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(TextField, {\n      id: \"outlined-basic\",\n      label: \"Drug\",\n      variant: \"outlined\",\n      name: \"drug\",\n      onChange: event => handleFormChange(index, event),\n      sx: {\n        mr: 2\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(FormControl, {\n      sx: {\n        mr: 2,\n        minWidth: 120\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(InputLabel, {\n      id: \"demo-simple-select-helper-label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 41\n      }\n    }, \"Frequency\"), /*#__PURE__*/React.createElement(Select, {\n      labelId: \"demo-simple-select-helper-label\",\n      id: \"demo-simple-select-helper\"\n      // value={age}\n      ,\n      name: \"frequency\",\n      label: \"frequency\",\n      onChange: event => handleFormChange(index, event)\n      // onChange={handleChange}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(MenuItem, {\n      value: '1-0-0',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 45\n      }\n    }, \"1-0-0\"), /*#__PURE__*/React.createElement(MenuItem, {\n      value: '1-1-0',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 45\n      }\n    }, \"1-1-0\"), /*#__PURE__*/React.createElement(MenuItem, {\n      value: '1-1-1',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 45\n      }\n    }, \"1-1-1\"), /*#__PURE__*/React.createElement(MenuItem, {\n      value: '0-1-1',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 45\n      }\n    }, \"0-1-1\"), /*#__PURE__*/React.createElement(MenuItem, {\n      value: '1-0-1',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 45\n      }\n    }, \"1-0-1\"), /*#__PURE__*/React.createElement(MenuItem, {\n      value: '1-0-0',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 45\n      }\n    }, \"1-0-0\"))), /*#__PURE__*/React.createElement(TextField, {\n      id: \"outlined-basic\",\n      label: \"Duration\",\n      variant: \"outlined\",\n      name: \"duration\",\n      helperText: \"Duration in Days\",\n      sx: {\n        mr: 2\n      },\n      onChange: event => handleFormChange(index, event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(TextField, {\n      id: \"outlined-basic\",\n      label: \"Instruction\",\n      variant: \"outlined\",\n      name: \"instruction\",\n      sx: {\n        mr: 2\n      },\n      onChange: event => handleFormChange(index, event),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      onClick: () => removeFields(index),\n      sx: {\n        mt: 1\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 37\n      }\n    }, \"   \", /*#__PURE__*/React.createElement(DeleteIcon, {\n      fontSize: \"medium\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 41\n      }\n    }), \" \"));\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    onClick: () => addFields(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 25\n    }\n  }, \"Add \")))), /*#__PURE__*/React.createElement(Stack, {\n    spacing: 3,\n    direction: \"row\",\n    style: {\n      marginLeft: \"309px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    onClick: e => submit(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 17\n    }\n  }, \"Submit\")));\n};\nexport default Prescription;","map":{"version":3,"names":["React","useState","useEffect","useDispatch","useSelector","DataGrid","GridActionsCellItem","listDoctors","listConsultants","updatePrescriptionData","IconButton","Box","jsPDF","format","setDayOfYear","TextField","TextareaAutosize","InputLabel","MenuItem","FormControl","Select","SelectChangeEvent","FormHelperText","Stack","Button","DatePicker","Grid","DeleteIcon","useLocation","FileDownloadIcon","Prescription","match","history","prescriptionId","params","id","dispatch","actualname","setActualName","height","setHeight","weight","setWeight","appointmentRowData","setAppointmentRowData","observation","setObservation","date","setDate","Date","isgenerated","setIsgenerated","prescrptionfile","setPrescrptionfile","isApiCall","setIsApiCall","location","doctorList","state","loading","error","doctors","patientList","consultationList","loadingConsultant","errorConsultant","consultants","appointmentDetails","find","r","_id","userLogin","userInfo","isAdmin","doctorInfo","doctor","email_id","email","sortModel","setSortModel","field","sort","patientHistory","headerName","width","hide","type","sortable","valueGetter","value","renderCell","cursor","pdf","consultant","win","window","open","document","write","row","prescriptionSource","data","length","filter","consultantInfo","name","uniqueData","e","patientEmail_address","inputFields","setInputFields","drug","frequency","duration","instruction","handleFormChange","index","event","target","addFields","newfield","removeFields","splice","head","body","setBody","generatePDF","doc","setFont","setFontSize","setTextColor","addImage","text","line","autoTable","margin","top","left","bottom","p","output","apiCall","prescriptionData","patientName","patientHeight","patientWeight","Observation","appointment_date","submit","preventDefault","forEach","a","push","Object","values","marginTop","newEditingApi","model","m","map","input","mr","minWidth","mt","marginLeft"],"sources":["/home/mayuri/Desktop/vaidya/vaidyamanager/frontend/src/screens/Prescription.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { DataGrid, GridActionsCellItem } from '@mui/x-data-grid';\nimport { listDoctors } from '../actions/productActions'\nimport { listConsultants, updatePrescriptionData } from '../actions/consultationActions.js'\nimport { IconButton } from '@mui/material'\nimport Box from '@mui/material/Box';\nimport jsPDF from \"jspdf\";\nimport \"jspdf-autotable\";\nimport { format, setDayOfYear } from \"date-fns\";\nimport TextField from '@mui/material/TextField';\nimport TextareaAutosize from '@mui/material/TextareaAutosize';\nimport InputLabel from '@mui/material/InputLabel';\nimport MenuItem from '@mui/material/MenuItem';\nimport FormControl from '@mui/material/FormControl';\nimport Select, { SelectChangeEvent } from '@mui/material/Select';\nimport FormHelperText from '@mui/material/FormHelperText';\nimport Stack from '@mui/material/Stack';\nimport Button from '@mui/material/Button';\nimport DatePicker from \"react-datepicker\";\nimport Grid from \"@material-ui/core/Grid\";\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { useLocation } from 'react-router-dom';\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\n\nconst Prescription = ({ match, history }) => {\n    const prescriptionId = match.params.id\n    // console.log(prescriptionId)\n    const dispatch = useDispatch();\n    const [actualname, setActualName] = useState('');\n    const [height, setHeight] = useState('');\n    const [weight, setWeight] = useState('');\n    const [appointmentRowData, setAppointmentRowData] = useState([])\n    const [observation, setObservation] = useState('');\n    const [date, setDate] = useState(new Date());\n    const [isgenerated, setIsgenerated] = useState(false);\n    const [prescrptionfile, setPrescrptionfile] = useState('');\n    const [isApiCall, setIsApiCall] = useState(false);\n    // const [mailId, setMailId] = useState();\n    const location = useLocation();\n    // console.log(location.state)\n\n\n    const doctorList = useSelector((state) => state.doctorList)\n    const { loading, error, doctors } = doctorList;\n    // console.log(\"Doctor List\", doctors);\n\n    const patientList = useSelector((state) => state.consultationList)\n    // console.log(\"List is\", patientList)\n    const { loadingConsultant, errorConsultant, consultants } = patientList;\n\n    const appointmentDetails = consultants?.find((r) => r._id === prescriptionId)\n    // if(appointmentDetails)\n    // console.log(\"appointmentDetails\", appointmentDetails)\n    const userLogin = useSelector((state) => state.userLogin)\n    const { userInfo } = userLogin\n    // console.log(\"user info\", userInfo);\n    const isAdmin = userInfo?.isAdmin;\n\n    const doctorInfo = doctors?.find((doctor) => doctor.email_id == userInfo?.email)\n    // console.log(\"Doctor Info\", doctorInfo)\n    //columns\n\n    const [sortModel, setSortModel] = useState([\n        {\n            field: \"date\",\n            sort: \"desc\"\n        }\n    ]);\n\n    const patientHistory = [\n        { field: '_id', headerName: 'ID', width: 90, hide: true },\n        { field: 'patientName', headerName: 'Patient Name', width: 190 },\n        {\n            field: 'date', headerName: 'Appointment Date', width: 190,\n            type: 'dateTime', sortable: true, valueGetter: ({ value }) => value && new Date(value)\n        },\n        { field: 'patientHeight', headerName: 'Height', width: 120 },\n        { field: 'patientWeight', headerName: 'Weight', width: 140 },\n        { field: 'Observation', headerName: 'Observation', width: 120 },\n        {\n            field: 'prescriptionSource', headerName: 'Prescription', width: 120,\n            renderCell: (params) => {\n                return (\n                    <div className='d-flex justify-content-between align-items-center' style={{ cursor: 'pointer' }}>\n                        <IconButton\n                            color='primary'\n                            size=\"large\"\n                            // onClick={()=>window.open(`${params.row.prescriptionSource}`,'_blank')}\n                            onClick={() => pdf(params)}\n                        >\n                            <FileDownloadIcon />\n                            {/* <a type= \"application/pdf\" target=\"_blank\"   href={`${params.prescriptionSource}`}/> */}\n                        </IconButton>\n                    </div>\n                )\n            }\n        },\n\n    ];\n    //Display the pdf function\n    const pdf = (consultant) => {\n        // console.log(\"first\", consultant.row.prescriptionSource)\n        var win = window.open();\n        win.document.write('<iframe src=\"' + consultant.row.prescriptionSource + '\" frameborder=\"0\" style=\"border:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;\" allowfullscreen></iframe>');\n    }\n\n    useEffect(() => {\n        // Dispatch the list doctors action and fill our state\n        dispatch(listDoctors())\n        dispatch(listConsultants())\n    }, [dispatch])\n\n    useEffect(() => {\n        const data = consultants?.length > 0 && consultants[0] !== 'undefined' && consultants?.filter((consultantInfo) => consultantInfo?.name == doctorInfo?.name)\n       const uniqueData= data?.length > 0 && data?.filter((e)=>e.patientEmail_address===appointmentDetails.patientEmail_address)\n    //    console.log(\"Data is\",uniqueData)\n        setAppointmentRowData(uniqueData)\n    }, [consultants, doctorInfo])\n\n    //use state for dynamic input fields\n    const [inputFields, setInputFields] = useState([\n        { drug: '', frequency: '', duration: '', instruction: '' }\n    ])\n\n    const handleFormChange = (index, event) => {\n        let data = [...inputFields];\n        data[index][event.target.name] = event.target.value;\n        setInputFields(data);\n    }\n\n    const addFields = () => {\n        let newfield = { drug: '', frequency: '', duration: '', instruction: '' }\n        setInputFields([...inputFields, newfield])\n    }\n\n    const removeFields = (index) => {\n        let data = [...inputFields];\n        data.splice(index, 1)\n        setInputFields(data)\n    }\n    //GeneratePDF Function\n\n    const [head] = React.useState([\"Drug\", \"Daily Dose\", \"Duration\", \"Instruction\"]);\n    const [body, setBody] = useState([]);\n\n\n    const generatePDF = () => {\n        let doc = new jsPDF(\"p\", \"pt\", \"a4\", true);\n        doc.setFont(\"Calibri\", \"bold\");\n        doc.setFontSize(12);\n        doc.setTextColor(14, 3, 64);\n\n        //   doc.text(\"Prescription\", 20, 140);\n        // doc.text(\"Octonyan loves jsPDF\", 25, 10);\n        // doc.text(\"This is centred text.\", 100, 20, null, null, \"center\");\n        doc.addImage(\"/images/mindvein.png\", \"PNG\", 40, 80, 150, 90);\n        doc.text(`Doctor's Name: ${appointmentDetails.name}`, 520, 135, null, null, \"right\");\n        doc.text(\"Address : Sector 8, Sheltor Complex, \\n\" +\n            \"Near KGN Xpress Hotel, Kharghar,\\n\" + \"Navi Mumbai 410210, \\n\" + \"Maharashtra, India.\", 550, 147, null, null, \"right\");\n        doc.text(\"Phone No:(+91) 8567029029\", 550, 200, null, null, \"right\");\n        // doc.addImage(\"/images/mindvein.png\", \"PNG\", X-axis, Y-asis, width, height);\n        doc.line(20, 230, 550, 230);\n        doc.text(\"Prescription\", 20, 270);\n\n        //   doc.text(\"Table 2\", 20, 300);\n        //   doc.line(20, 302, 550, 302);\n\n        doc.autoTable({\n            margin: { top: 250, left: 20, bottom: 30 },\n            head: [head],\n            body: body,\n        });\n\n\n\n        // window.open(doc.output(\"bloburl\"), \"_blank\");\n        // const p = doc.output(\"bloburl\");\n        const p = doc.output(\"datauristring\");\n        setPrescrptionfile(p);\n        setIsApiCall(true);\n\n    }\n    const apiCall = () => {\n        const prescriptionData = {\n            patientName: actualname,\n            patientHeight: height,\n            patientWeight: weight,\n            Observation: observation,\n            name: appointmentDetails.name,\n            date: appointmentDetails.appointment_date,\n            prescriptionSource: prescrptionfile\n        }\n        // console.log(\"prescriptionId\", prescriptionId, prescriptionData)\n        dispatch(updatePrescriptionData(prescriptionId, prescriptionData))\n\n    }\n\n    useEffect(() => {\n        if (isApiCall) {\n            apiCall()\n        }\n    }, [isApiCall])\n\n\n    const submit = async (e) => {\n        e.preventDefault();\n        const data = []\n        inputFields.forEach((a, index) => {\n            data.push(Object.values(a));\n        })\n        setBody(data);\n        // console.log(inputFields)\n        setIsgenerated(true);\n\n        //api call\n\n    }\n\n    useEffect(() => {\n        if (isgenerated) {\n            generatePDF();\n            setIsgenerated(false)\n        }\n\n    }, [isgenerated]);\n\n\n\n    return (\n        <div style={{ marginTop: \"6rem\" }}>\n            <div>\n                <Box sx={{ height: 400, width: '100%' }}>\n                    <DataGrid\n                        getRowId={(r) => r._id}\n                        rows={appointmentRowData}\n                        columns={patientHistory}\n                        pageSize={5}\n                        rowsPerPageOptions={[5]}\n                        disableSelectionOnClick\n                        experimentalFeatures={{ newEditingApi: true }}\n                        sortModel={sortModel}\n                        onSortModelChange={(model) => setSortModel(model)}\n                    />\n                </Box>\n            </div>\n            <div className=\"container mt-4 p-4\">\n                <h4>Patient Information</h4>\n                <hr />\n                <div className=\"row\">\n                    <Box\n                        component=\"form\"\n                        sx={{\n                            '& > :not(style)': { m: 1, width: '23ch' },\n                        }}\n                        noValidate\n                        autoComplete=\"off\"\n                    >\n                        <TextField id=\"outlined-basic\" label=\"Patient Name\" value={actualname}\n                            // onChange={(name) => setName()}\n                            onChange={(e) => setActualName(e.target.value)}\n                            variant=\"outlined\" />\n                        <TextField id=\"outlined-basic\" label=\"Patient Height\" value={height}\n                            // onChange={(height) => setHeight(height)}\n                            onChange={(e) => setHeight(e.target.value)}\n                            variant=\"outlined\" />\n                        <TextField id=\"outlined-basic\" label=\"Patient Weight\" value={weight}\n                            // onChange={(weight) => setWeight(weight)}\n                            onChange={(e) => setWeight(e.target.value)}\n                            variant=\"outlined\" />\n                        {/* <TextField id=\"outlined-basic\" label=\"Date\" variant=\"outlined\" /> */}\n                        <DatePicker\n                            selected={date}\n                            onChange={(e) => setDate(e)}\n                            dateFormat=\"MMM d, yyyy hh:mm aa\"\n                            placeholderText=\"Please Select Date\"\n                        />\n                    </Box>\n\n\n                </div>\n                <h4>Patient Observation</h4>\n                <hr />\n                <div className=\"row\">\n                    <Box\n                        component=\"form\"\n                        sx={{\n                            '& > :not(style)': { m: 1, width: '23ch' },\n                        }}\n                        noValidate\n                        autoComplete=\"off\"\n                    >\n                        <TextareaAutosize\n                            aria-label=\"minimum height\"\n                            minRows={3}\n                            // placeholder=\"Minimum 3 rows\"\n                            value={observation}\n                            onChange={(e) => setObservation(e.target.value)}\n                            // onChange={(o) => setObservation(o)}\n                            style={{ width: '100ch' }}\n                        />\n\n                    </Box>\n                </div>\n\n                <h4>Prescriptions</h4>\n                <hr />\n                <div className=\"row\">\n                    <Box\n                        component=\"form\"\n                        sx={{ m: 1 }}\n                        noValidate\n                        autoComplete=\"off\">\n                        {inputFields.map((input, index) => {\n                            return (\n                                <div key={index}>\n                                    <TextField id=\"outlined-basic\" label=\"Drug\" variant=\"outlined\"\n                                        name='drug'\n                                        onChange={event => handleFormChange(index, event)}\n                                        sx={{ mr: 2 }}\n                                    />\n                                    <FormControl sx={{ mr: 2, minWidth: 120 }}>\n                                        <InputLabel id=\"demo-simple-select-helper-label\">Frequency</InputLabel>\n                                        <Select\n                                            labelId=\"demo-simple-select-helper-label\"\n                                            id=\"demo-simple-select-helper\"\n                                            // value={age}\n                                            name='frequency'\n                                            label=\"frequency\"\n                                            onChange={event => handleFormChange(index, event)}\n                                        // onChange={handleChange}\n                                        >\n                                            <MenuItem value={'1-0-0'}>1-0-0</MenuItem>\n                                            <MenuItem value={'1-1-0'}>1-1-0</MenuItem>\n                                            <MenuItem value={'1-1-1'}>1-1-1</MenuItem>\n                                            <MenuItem value={'0-1-1'}>0-1-1</MenuItem>\n                                            <MenuItem value={'1-0-1'}>1-0-1</MenuItem>\n                                            <MenuItem value={'1-0-0'}>1-0-0</MenuItem>\n                                        </Select>\n\n                                    </FormControl>\n                                    <TextField id=\"outlined-basic\" label=\"Duration\" variant=\"outlined\"\n                                        name='duration'\n                                        helperText=\"Duration in Days\"\n                                        sx={{ mr: 2 }}\n                                        onChange={event => handleFormChange(index, event)}\n                                    />\n                                    <TextField id=\"outlined-basic\" label=\"Instruction\" variant=\"outlined\"\n                                        name='instruction'\n                                        sx={{ mr: 2 }}\n                                        onChange={event => handleFormChange(index, event)}\n                                    />\n                                    <Button variant=\"contained\"\n                                        onClick={() => removeFields(index)}\n                                        sx={{ mt: 1 }}\n\n                                    >   <DeleteIcon fontSize='medium' /> </Button>\n                                </div>\n                            )\n                        })}\n                        <Button variant=\"contained\"\n                            onClick={() => addFields()}\n                        >Add </Button>\n                    </Box>\n                </div>\n\n            </div>\n            <Stack spacing={3} direction=\"row\" style={{ marginLeft: \"309px\" }}>\n                <Button variant=\"contained\"\n                    onClick={(e) => submit(e)}\n                >Submit</Button>\n                {/* <Button variant=\"outlined\">Outlined</Button> */}\n            </Stack>\n        </div>\n\n\n    )\n}\n\nexport default Prescription"],"mappings":"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"},"metadata":{},"sourceType":"module"}